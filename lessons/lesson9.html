<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫ 9: –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #00897b; /* –ë–∏—Ä—é–∑–æ–≤—ã–π (—á–∏—Å—Ç–æ—Ç–∞) */
            --dark: #004d40;
            --accent: #80cbc4;
            --bg: #e0f2f1;
            --white: #ffffff;
            --brown: #795548;
            --trash: #5d4037;
        }

        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            line-height: 1.6; 
            color: #333; 
            background-color: var(--bg); 
            margin: 0; 
            background-image: url('data:image/svg+xml;utf8,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><circle cx="30" cy="30" r="1" fill="%23b2dfdb"/></svg>');
        }

        header { 
            background: linear-gradient(135deg, var(--dark), var(--primary)); 
            color: white; 
            padding: 25px 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-radius: 0 0 20px 20px;
        }

        .back-btn { 
            color: white; text-decoration: none; font-weight: bold; 
            border: 2px solid rgba(255,255,255,0.7); padding: 8px 20px; 
            border-radius: 25px; transition: 0.3s;
        }
        .back-btn:hover { background: white; color: var(--dark); }

        .content { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        section { 
            background: var(--white); padding: 30px; border-radius: 20px; 
            margin-bottom: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 1px solid #80cbc4;
        }

        h2 { color: var(--dark); border-bottom: 3px solid var(--accent); padding-bottom: 10px; display: inline-block; margin-top: 0; }
        h3 { color: var(--primary); margin-top: 20px; }

        /* –ò–ì–†–ê 1: –î–æ/–ü–æ—Å–ª–µ (–û—á–∏—Å—Ç–∫–∞) */
        .scene-container {
            position: relative;
            height: 350px;
            background: #c8e6c9; /* –¢—Ä–∞–≤–∞ */
            border-radius: 15px;
            border: 4px solid var(--primary);
            overflow: hidden;
            margin-top: 20px;
        }
        .scene-bg {
            position: absolute; width: 100%; height: 100%;
            background-image: radial-gradient(circle at 50% 50%, #a5d6a7 10%, #c8e6c9 90%);
        }
        
        .pollution-item {
            position: absolute;
            cursor: pointer;
            font-size: 2rem;
            transition: 0.3s;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.3));
        }
        .pollution-item:hover { transform: scale(1.2); }
        .pollution-item.cleaned {
            animation: flyAway 0.5s forwards;
        }

        @keyframes flyAway {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(0.1); opacity: 0; }
        }

        /* –ò–ì–†–ê 2: –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (–ö–∞—Ä—Ç–æ—á–∫–∏) */
        .recon-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .recon-card {
            background: #fff; border: 1px solid #ddd; border-radius: 10px; padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .recon-header { font-weight: bold; color: var(--dark); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .recon-options { display: flex; flex-direction: column; gap: 5px; }
        
        .recon-btn {
            background: #f5f5f5; border: 1px solid #ccc; padding: 10px; border-radius: 5px;
            cursor: pointer; text-align: left; transition: 0.2s; font-size: 0.95rem;
        }
        .recon-btn:hover { background: #e0f2f1; }
        
        /* –°—Ç–∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π */
        .recon-btn.correct { background: #c8e6c9; border-color: green; font-weight: bold; color: #2e7d32; }
        .recon-btn.wrong { background: #ffcdd2; border-color: red; color: #c62828; }

        /* –†–∞–±–æ—á–∏–µ –ª–∏—Å—Ç—ã */
        details.worksheet { background: var(--white); border: 1px solid #ccc; border-radius: 8px; margin-bottom: 15px; overflow: hidden; }
        summary.worksheet-header { background: #e0f2f1; padding: 15px; cursor: pointer; font-weight: bold; color: var(--dark); list-style: none; display: flex; justify-content: space-between; align-items: center; }
        summary.worksheet-header:hover { background: #b2dfdb; }
        summary.worksheet-header::after { content: '‚ñº'; font-size: 0.8em; }
        details[open] summary.worksheet-header::after { content: '‚ñ≤'; }
        .sheet-content { padding: 20px; border-top: 1px solid #eee; background: #fff; }
        .sheet-input { border: none; border-bottom: 2px solid #aaa; background: #f9f9f9; width: 200px; font-family: inherit; padding: 5px; }
        textarea.sheet-area { width: 100%; height: 80px; border: 1px solid #ccc; border-radius: 5px; padding: 10px; margin-top: 5px; font-family: inherit; background: #fcfcfc; }
        .btn-download { background: var(--brown); color: white; border: none; padding: 15px 30px; border-radius: 30px; cursor: pointer; width: 100%; font-size: 1.1rem; font-weight: bold; margin-top: 20px; }

        /* –†–µ—Ñ–ª–µ–∫—Å–∏—è */
        .step-container { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px; }
        .step-btn { 
            background: white; border: 2px solid var(--primary); padding: 15px 20px; 
            border-radius: 30px; cursor: pointer; transition: 0.2s; font-weight: bold; color: var(--primary);
        }
        .step-btn:hover { background: var(--primary); color: white; transform: translateY(-3px); }
        .btn-clear { background: #9e9e9e; color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-size: 0.9rem; margin-top: 20px; }
    </style>
</head>
<body>

<header>
    <a href="../index.html" class="back-btn">‚Üê –ú–µ–Ω—é</a>
    <div style="text-align: right">
        <h1 style="margin:0; font-size: 1.5rem;">–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</h1>
        <small>–£—Ä–æ–∫ ‚Ññ9</small>
    </div>
</header>

<div class="content">
    
    <section>
        <h2>üåç –ö–∞–∫ –Ω–µ –Ω–∞–≤—Ä–µ–¥–∏—Ç—å?</h2>
        <p><i>–í–æ–ø—Ä–æ—Å:</i> –ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —á–µ–ª–æ–≤–µ–∫–∞ –æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–∞–º—ã–µ –≥–ª—É–±–æ–∫–∏–µ "—à—Ä–∞–º—ã" –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ?</p>
        <div style="background: #e0f2f1; padding: 15px; border-radius: 10px; border-left: 5px solid var(--primary);">
            <strong>–¶–µ–ª—å —É—Ä–æ–∫–∞:</strong> –£–∑–Ω–∞—Ç—å —Å–ø–æ—Å–æ–±—ã —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ–∫—Ä—É–∂–∞—é—â—É—é —Å—Ä–µ–¥—É.
        </div>
    </section>

    <section>
        <h2>üßπ –¢—Ä–µ–Ω–∞–∂–µ—Ä ¬´–£–±–µ—Ä–∏ —Å–ª–µ–¥—ã¬ª</h2>
        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Ä–µ–¥—è—Ç –ø—Ä–∏—Ä–æ–¥–µ, —á—Ç–æ–±—ã –æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è–Ω—É:</p>
        
        <div class="scene-container" id="cleanScene">
            <div class="scene-bg"></div>
            <div class="pollution-item" style="top: 200px; left: 100px;" onclick="cleanItem(this)">üöØ</div>
            <div class="pollution-item" style="top: 250px; left: 300px;" onclick="cleanItem(this)">üî•</div>
            <div class="pollution-item" style="top: 150px; left: 500px;" onclick="cleanItem(this)">üîä</div>
            <div class="pollution-item" style="top: 280px; left: 600px;" onclick="cleanItem(this)">ü•§</div>
            <div class="pollution-item" style="top: 180px; left: 200px;" onclick="cleanItem(this)">üö¨</div>
            
            <div id="clean-msg" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2rem; font-weight: bold; color: green; display: none;">–ü–æ–ª—è–Ω–∞ —á–∏—Å—Ç–∞! üå±</div>
        </div>
        <p><small>–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∏–∫–æ–Ω–∫–∞–º: üöØ(–ú—É—Å–æ—Ä), üî•(–ö–æ—Å—Ç–µ—Ä), üîä(–®—É–º), ü•§(–ü–ª–∞—Å—Ç–∏–∫), üö¨(–û–∫—É—Ä–∫–∏)</small></p>
    </section>

    <section>
        <h2>üìö –ü—Ä–∏–Ω—Ü–∏–ø—ã –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏</h2>
        <ul>
            <li><b>–ú—É—Å–æ—Ä:</b> –í—Å–µ–≥–¥–∞ —É–Ω–æ—Å–∏ —Å —Å–æ–±–æ–π. –î–∞–∂–µ –æ—Ä–≥–∞–Ω–∏–∫—É –ª—É—á—à–µ –∑–∞–∫–æ–ø–∞—Ç—å.</li>
            <li><b>–ö–æ—Å—Ç–µ—Ä:</b> –ò—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ä–µ–ª–∫—É. –ö–æ—Å—Ç–µ—Ä ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ä—ã—Ö –∫–æ—Å—Ç—Ä–∏—â–∞—Ö.</li>
            <li><b>–¢—Ä–æ–ø—ã:</b> –ù–µ —Å—Ä–µ–∑–∞–π —É–≥–ª—ã, —á—Ç–æ–±—ã –Ω–µ –≤—ã—Ç–∞–ø—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –º–µ—Å—Ç–∞.</li>
            <li><b>–®—É–º:</b> –õ–µ—Å –ª—é–±–∏—Ç —Ç–∏—à–∏–Ω—É. –ñ–∏–≤–æ—Ç–Ω—ã–µ –±–æ—è—Ç—Å—è –≥—Ä–æ–º–∫–∏—Ö –∑–≤—É–∫–æ–≤.</li>
        </ul>
    </section>

    <section>
        <h2>üõ†Ô∏è –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ. <b>–í–Ω–∏–º–∞–Ω–∏–µ:</b> –£ –≤–∞—Å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞ –∫–∞–∂–¥—É—é —Å–∏—Ç—É–∞—Ü–∏—é!</p>
        
        <div class="recon-grid">
            <div class="recon-card">
                <div class="recon-header">üóëÔ∏è –ó–∞–º—É—Å–æ—Ä–µ–Ω–Ω–∞—è –ø–æ–ª—è–Ω–∞</div>
                <div class="recon-options">
                    <button class="recon-btn" onclick="checkRecon(this, false)">–°–∂–µ—á—å –º—É—Å–æ—Ä</button>
                    <button class="recon-btn" onclick="checkRecon(this, true)">–°–æ–±—Ä–∞—Ç—å –∏ —É–Ω–µ—Å—Ç–∏</button>
                    <button class="recon-btn" onclick="checkRecon(this, false)">–ó–∞–∫–æ–ø–∞—Ç—å –ø–ª–∞—Å—Ç–∏–∫</button>
                </div>
            </div>
            <div class="recon-card">
                <div class="recon-header">üë£ –†–∞–∑—Ä—É—à–µ–Ω–Ω–∞—è —Ç—Ä–æ–ø–∞</div>
                <div class="recon-options">
                    <button class="recon-btn" onclick="checkRecon(this, false)">–ò–¥—Ç–∏ —Ä—è–¥–æ–º –ø–æ —Ç—Ä–∞–≤–µ</button>
                    <button class="recon-btn" onclick="checkRecon(this, true)">–ò–¥—Ç–∏ –ø–æ –≥—Ä—è–∑–∏ (–ø–æ —Ü–µ–Ω—Ç—Ä—É)</button>
                    <button class="recon-btn" onclick="checkRecon(this, false)">–°–¥–µ–ª–∞—Ç—å –Ω–æ–≤—É—é —Ç—Ä–æ–ø—É</button>
                </div>
            </div>
            <div class="recon-card">
                <div class="recon-header">üêª –§–æ—Ç–æ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏</div>
                <div class="recon-options">
                    <button class="recon-btn" onclick="checkRecon(this, true)">–°–Ω–∏–º–∞—Ç—å –∏–∑–¥–∞–ª–µ–∫–∞ (–∑—É–º)</button>
                    <button class="recon-btn" onclick="checkRecon(this, false)">–ü–æ–¥–æ–π—Ç–∏ –ø–æ–±–ª–∏–∂–µ</button>
                    <button class="recon-btn" onclick="checkRecon(this, false)">–ü—Ä–∏–∫–æ—Ä–º–∏—Ç—å –µ–¥–æ–π</button>
                </div>
            </div>
        </div>
    </section>

    <section id="worksheets-container">
        <h2>üìù –†–∞–±–æ—á–∏–µ –ª–∏—Å—Ç—ã (–ó–∞–ø–æ–ª–Ω–∏ –∏ —Å–∫–∞—á–∞–π)</h2>
        <p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Å–∫–∞—á–∞–π—Ç–µ Word-—Ñ–∞–π–ª.</p>

        <details class="worksheet" open>
            <summary class="worksheet-header">üìÑ –õ–ò–°–¢ ‚Ññ1 ‚Äî ¬´–û–ø—Ä–µ–¥–µ–ª–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ¬ª</summary>
            <div class="sheet-content">
                <p>–§–ò–û: <input type="text" class="sheet-input"></p>
                <h3>1. –¢–∏–ø—ã –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</h3>
                <table style="width:100%; border-collapse:collapse; border:1px solid #ccc;">
                    <tr><th style="padding:5px;border:1px solid #ccc">–°–∏—Ç—É–∞—Ü–∏—è</th><th style="border:1px solid #ccc">–¢–∏–ø –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</th></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–û—Å—Ç–∞–≤–∏–ª–∏ –ø–∞–∫–µ—Ç—ã</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–ì—Ä–æ–º–∫–∞—è –º—É–∑—ã–∫–∞</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–ö–æ—Å—Ç–µ—Ä –Ω–∞ —Ç—Ä–∞–≤–µ</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                </table>
                <h3>2. –°–ø–æ—Å–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ (–ü—Ä–µ–¥–ª–æ–∂–∏ —Ä–µ—à–µ–Ω–∏–µ)</h3>
                <textarea class="sheet-area" placeholder="–î–ª—è –º—É—Å–æ—Ä–∞... –î–ª—è —à—É–º–∞..."></textarea>
            </div>
        </details>

        <details class="worksheet">
            <summary class="worksheet-header">üîÑ –õ–ò–°–¢ ‚Ññ3 ‚Äî ¬´–≠–∫–æ-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞¬ª</summary>
            <div class="sheet-content">
                <h3>1. –ó–∞–º–µ–Ω–∞ –≤—Ä–µ–¥–Ω—ã—Ö –≤–µ—â–µ–π</h3>
                <table style="width:100%; border-collapse:collapse; border:1px solid #ccc;">
                    <tr><th style="padding:5px;border:1px solid #ccc">–í—Ä–µ–¥–Ω–æ</th><th style="border:1px solid #ccc">–≠–∫–æ-–∑–∞–º–µ–Ω–∞</th></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è –ø–æ—Å—É–¥–∞</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–í–ª–∞–∂–Ω—ã–µ —Å–∞–ª—Ñ–µ—Ç–∫–∏</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                    <tr><td style="padding:5px;border:1px solid #ccc">–ü–∞–∫–µ—Ç—ã –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞</td><td style="border:1px solid #ccc"><input style="width:95%" type="text"></td></tr>
                </table>
                <h3>2. –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –±—Ä–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Å—Ç–∏–∫?</h3>
                <textarea class="sheet-area"></textarea>
            </div>
        </details>

        <details class="worksheet">
            <summary class="worksheet-header">ü§ù –õ–ò–°–¢ ‚Ññ4 ‚Äî ¬´–ú–æ–∏ –ø—Ä–∞–≤–∏–ª–∞¬ª</summary>
            <div class="sheet-content">
                <h3>1. –ú–æ–µ –æ–±–µ—â–∞–Ω–∏–µ –ø—Ä–∏—Ä–æ–¥–µ</h3>
                <textarea class="sheet-area" placeholder="–Ø –æ–±–µ—â–∞—é..."></textarea>
                <h3>2. –¢—Ä–∏ –º–æ–∏—Ö –ª–∏—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª–∞</h3>
                <input type="text" class="sheet-input" style="width:100%; margin-bottom:5px;" placeholder="1. ..."><br>
                <input type="text" class="sheet-input" style="width:100%; margin-bottom:5px;" placeholder="2. ..."><br>
                <input type="text" class="sheet-input" style="width:100%;" placeholder="3. ...">
            </div>
        </details>

        <button class="btn-download" onclick="generateAndDownloadWord()">üíæ –°–∫–∞—á–∞—Ç—å –ª–∏—Å—Ç—ã (Word)</button>
    </section>

    <section>
        <h2 style="text-align: center;">üë£ –†–µ—Ñ–ª–µ–∫—Å–∏—è ¬´–û–¥–∏–Ω —à–∞–≥¬ª</h2>
        <p style="text-align: center;">–ö–∞–∫–æ–π —à–∞–≥ —Ç—ã –≥–æ—Ç–æ–≤ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø—Ä–∏—Ä–æ–¥—ã?</p>
        
        <div class="step-container">
            <button class="step-btn" onclick="vote(0)">–ù–µ –º—É—Å–æ—Ä–∏—Ç—å üöÆ</button>
            <button class="step-btn" onclick="vote(1)">–ë—Ä–∞—Ç—å –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–µ üçº</button>
            <button class="step-btn" onclick="vote(2)">–•–æ–¥–∏—Ç—å –ø–æ —Ç—Ä–æ–ø–∞–º üö∂</button>
            <button class="step-btn" onclick="vote(3)">–£—á–∏—Ç—å –¥—Ä—É–≥–∏—Ö üì¢</button>
        </div>

        <p id="vote-msg" style="text-align: center; color: var(--primary); font-weight: bold; margin-top: 10px; height: 20px;"></p>

        <div style="max-width: 500px; margin: 20px auto;">
            <canvas id="reflectionChart"></canvas>
        </div>

        <div style="text-align: center;">
            <button class="btn-clear" onclick="clearVotes()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </section>
</div>

<script>
    // --- –ò–ì–†–ê 1: –û—á–∏—Å—Ç–∫–∞ ---
    let itemsLeft = 5;
    function cleanItem(el) {
        if(!el.classList.contains('cleaned')) {
            el.classList.add('cleaned');
            itemsLeft--;
            if(itemsLeft === 0) {
                document.getElementById('clean-msg').style.display = 'block';
                document.querySelector('.scene-container').style.borderColor = "#66bb6a"; // Green border
            }
        }
    }

    // --- –ò–ì–†–ê 2: –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (1 –ü–û–ü–´–¢–ö–ê) ---
    function checkRecon(btn, isCorrect) {
        const container = btn.parentElement;

        // –ï—Å–ª–∏ —É–∂–µ –±—ã–ª –¥–∞–Ω –æ—Ç–≤–µ—Ç, –±–ª–æ–∫–∏—Ä—É–µ–º –∫–ª–∏–∫
        if (container.dataset.answered === "true") {
            return; 
        }

        // –ü–æ–º–µ—á–∞–µ–º, —á—Ç–æ –æ—Ç–≤–µ—Ç –¥–∞–Ω
        container.dataset.answered = "true";

        // –û–∫—Ä–∞—à–∏–≤–∞–µ–º –Ω–∞–∂–∞—Ç—É—é –∫–Ω–æ–ø–∫—É
        if(isCorrect) {
            btn.classList.add('correct');
            btn.innerText += " ‚úÖ";
        } else {
            btn.classList.add('wrong');
            btn.innerText += " ‚ùå";
        }

        // –ë–ª–æ–∫–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–¥–µ–ª–∞–µ–º –∏—Ö –±–ª–µ–¥–Ω—ã–º–∏ –∏ –Ω–µ–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏)
        const allBtns = container.querySelectorAll('.recon-btn');
        allBtns.forEach(b => {
            b.style.cursor = 'not-allowed';
            if(b !== btn) b.style.opacity = '0.5';
        });
    }

    // --- WORD GENERATOR ---
    function generateAndDownloadWord() {
        const container = document.getElementById('worksheets-container');
        const clone = container.cloneNode(true);
        clone.querySelector('button').remove(); clone.querySelector('h2').remove(); clone.querySelector('p').remove();
        
        const inputs = clone.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            const span = document.createElement('span');
            span.style.color = 'blue'; span.style.fontWeight = 'bold';
            span.innerText = input.value || "______________________";
            input.replaceWith(span);
        });

        const details = clone.querySelectorAll('details');
        details.forEach(det => {
            const title = det.querySelector('summary').innerText;
            const div = document.createElement('div');
            div.innerHTML = `<h3>${title}</h3>` + det.querySelector('.sheet-content').innerHTML;
            det.replaceWith(div);
        });

        const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>–î–ó –£—Ä–æ–∫ 9</title></head><body>";
        const footer = "</body></html>";
        const content = `<h1 style="text-align:center;color:#004d40">–õ–∏—Å—Ç—ã: –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</h1>` + clone.innerHTML;
        
        const blob = new Blob(['\ufeff', header + content + footer], { type: 'application/msword' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a'); link.href = url; link.download = '–ú–æ–∏_–ü—Ä–∞–≤–∏–ª–∞_–£—Ä–æ–∫_9.doc';
        document.body.appendChild(link); link.click(); document.body.removeChild(link);
    }

    // --- –†–ï–§–õ–ï–ö–°–ò–Ø ---
    const labels = ["–ù–µ –º—É—Å–æ—Ä–∏—Ç—å", "–ú–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–µ", "–ü–æ —Ç—Ä–æ–ø–∞–º", "–£—á–∏—Ç—å –¥—Ä—É–≥–∏—Ö"];
    let votes = JSON.parse(localStorage.getItem('lesson9_votes')) || [0, 0, 0, 0];
    let myChart;

    function initChart() {
        const ctx = document.getElementById('reflectionChart').getContext('2d');
        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: '–í—ã–±–æ—Ä —Å—Ç—É–¥–µ–Ω—Ç–æ–≤',
                    data: votes,
                    backgroundColor: ['#b2dfdb', '#80cbc4', '#4db6ac', '#26a69a'],
                    borderColor: '#004d40',
                    borderWidth: 1
                }]
            },
            options: { scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } }, plugins: { legend: { display: false } } }
        });
    }

    function vote(index) {
        votes[index]++;
        localStorage.setItem('lesson9_votes', JSON.stringify(votes));
        myChart.data.datasets[0].data = votes;
        myChart.update();
        const msg = document.getElementById('vote-msg');
        msg.innerText = "–®–∞–≥ –∑–∞—Å—á–∏—Ç–∞–Ω! üë£";
        setTimeout(() => { msg.innerText = ""; }, 1500);
    }

    function clearVotes() {
        if(confirm("–û—á–∏—Å—Ç–∏—Ç—å?")) {
            votes = [0, 0, 0, 0];
            localStorage.setItem('lesson9_votes', JSON.stringify(votes));
            myChart.data.datasets[0].data = votes;
            myChart.update();
        }
    }

    window.onload = initChart;
</script>

</body>
</html>