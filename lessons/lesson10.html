<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫ 10: –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #fbc02d; /* –ñ–µ–ª—Ç—ã–π (–∏–≥—Ä–æ–≤–æ–π) */
            --dark: #f57f17;
            --accent: #fff9c4;
            --bg: #fffde7;
            --white: #ffffff;
            --brown: #795548;
            --green: #43a047;
            --red: #e53935;
        }

        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            line-height: 1.6; 
            color: #333; 
            background-color: var(--bg); 
            margin: 0; 
            background-image: url('data:image/svg+xml;utf8,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="2" fill="%23fdd835"/></svg>');
        }

        header { 
            background: linear-gradient(135deg, var(--dark), var(--primary)); 
            color: white; 
            padding: 25px 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-radius: 0 0 20px 20px;
        }

        .back-btn { 
            color: white; text-decoration: none; font-weight: bold; 
            border: 2px solid rgba(255,255,255,0.7); padding: 8px 20px; 
            border-radius: 25px; transition: 0.3s;
        }
        .back-btn:hover { background: white; color: var(--dark); }

        .content { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        section { 
            background: var(--white); padding: 30px; border-radius: 20px; 
            margin-bottom: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 1px solid #ffe082;
        }

        h2 { color: var(--dark); border-bottom: 3px solid var(--primary); padding-bottom: 10px; display: inline-block; margin-top: 0; }
        h3 { color: var(--dark); margin-top: 20px; }

        /* –ò–ì–†–ê 1: –ü—Ä–∞–≤–¥–∞/–ú–∏—Ñ */
        .myth-grid { display: grid; gap: 15px; }
        .myth-card { 
            background: #f9f9f9; padding: 15px; border-radius: 10px; 
            border: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; 
        }
        .myth-btns button { 
            padding: 8px 15px; margin-left: 5px; border: none; border-radius: 5px; 
            cursor: pointer; font-weight: bold; color: white; transition: 0.2s;
        }
        .btn-true { background: #4caf50; }
        .btn-false { background: #f44336; }
        .btn-true:hover { background: #388e3c; }
        .btn-false:hover { background: #d32f2f; }
        .myth-result { font-weight: bold; margin-left: 10px; display: none; }

        /* –ò–ì–†–ê 2: –ó–µ–ª–µ–Ω—ã–π —Å–≤–µ—Ç */
        .light-game { text-align: center; background: #eceff1; padding: 20px; border-radius: 15px; }
        .light-task { font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; }
        .light-controls { display: flex; justify-content: center; gap: 20px; }
        .light-btn { 
            width: 80px; height: 80px; border-radius: 50%; border: 4px solid #fff; 
            cursor: pointer; transition: 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .light-green { background: #4caf50; }
        .light-red { background: #f44336; }
        .light-btn:active { transform: scale(0.9); }

        /* –ò–ì–†–ê 3: –¶–µ–ø–æ—á–∫–∞ (Drag&Drop) */
        .chain-container { 
            background: #e8f5e9; padding: 20px; border-radius: 15px; 
            border: 2px dashed #43a047; min-height: 100px; display: flex; 
            align-items: center; gap: 10px; overflow-x: auto;
        }
        .chain-pool { margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap; }
        .chain-item { 
            background: white; padding: 10px 15px; border-radius: 20px; 
            border: 1px solid #43a047; cursor: grab; font-weight: bold; 
        }
        .chain-arrow { font-size: 1.5rem; color: #43a047; }

        /* –†–∞–±–æ—á–∏–µ –ª–∏—Å—Ç—ã */
        details.worksheet { background: var(--white); border: 1px solid #ccc; border-radius: 8px; margin-bottom: 15px; overflow: hidden; }
        summary.worksheet-header { background: #fff9c4; padding: 15px; cursor: pointer; font-weight: bold; color: var(--dark); list-style: none; display: flex; justify-content: space-between; align-items: center; }
        summary.worksheet-header:hover { background: #fff59d; }
        summary.worksheet-header::after { content: '‚ñº'; font-size: 0.8em; }
        details[open] summary.worksheet-header::after { content: '‚ñ≤'; }
        .sheet-content { padding: 20px; border-top: 1px solid #eee; background: #fff; }
        .sheet-input { border: none; border-bottom: 2px solid #aaa; background: #f9f9f9; width: 200px; font-family: inherit; padding: 5px; }
        textarea.sheet-area { width: 100%; height: 80px; border: 1px solid #ccc; border-radius: 5px; padding: 10px; margin-top: 5px; font-family: inherit; background: #fcfcfc; }
        .btn-download { background: var(--brown); color: white; border: none; padding: 15px 30px; border-radius: 30px; cursor: pointer; width: 100%; font-size: 1.1rem; font-weight: bold; margin-top: 20px; }

        /* –†–µ—Ñ–ª–µ–∫—Å–∏—è (Canvas) */
        #smileCanvas { border: 2px solid #ddd; border-radius: 10px; cursor: crosshair; background: #fff; }
        .palette { display: flex; gap: 10px; justify-content: center; margin-bottom: 10px; }
        .color-swatch { width: 30px; height: 30px; border-radius: 50%; cursor: pointer; border: 2px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .color-swatch.active { transform: scale(1.2); border-color: #333; }
        .btn-action { background: var(--primary); color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <a href="../index.html" class="back-btn">‚Üê –ú–µ–Ω—é</a>
    <div style="text-align: right">
        <h1 style="margin:0; font-size: 1.5rem;">–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã</h1>
        <small>–£—Ä–æ–∫ ‚Ññ10</small>
    </div>
</header>

<div class="content">
    
    <section>
        <h2>üé≤ –£—á–∏–º—Å—è –∏–≥—Ä–∞—è</h2>
        <p><i>–í–æ–ø—Ä–æ—Å:</i> –ú–æ–∂–Ω–æ –ª–∏ —Å–ø–∞—Å—Ç–∏ –ø–ª–∞–Ω–µ—Ç—É, –ø—Ä–æ—Å—Ç–æ –∏–≥—Ä–∞—è –≤ –∏–≥—Ä—ã? –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ?</p>
        <div style="background: #fff9c4; padding: 15px; border-radius: 10px; border-left: 5px solid var(--primary);">
            <strong>–¶–µ–ª—å:</strong> –ü–æ–Ω—è—Ç—å, –∫–∞–∫ –∏–≥—Ä—ã –ø–æ–º–æ–≥–∞—é—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∫—É–ª—å—Ç—É—Ä—É.
        </div>
    </section>

    <section>
        <h2>‚ùì –ò–≥—Ä–∞ ¬´–ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –ú–∏—Ñ?¬ª</h2>
        <div class="myth-grid">
            <div class="myth-card">
                <span>1. –ü–ª–∞—Å—Ç–∏–∫–æ–≤–∞—è –±—É—Ç—ã–ª–∫–∞ –∏—Å—á–µ–∑–Ω–µ—Ç –∑–∞ 1 –≥–æ–¥.</span>
                <div class="myth-btns">
                    <button class="btn-true" onclick="checkMyth(this, false)">–ü—Ä–∞–≤–¥–∞</button>
                    <button class="btn-false" onclick="checkMyth(this, true)">–ú–∏—Ñ</button>
                    <span class="myth-result"></span>
                </div>
            </div>
            <div class="myth-card">
                <span>2. –ñ–∏–≤–æ—Ç–Ω—ã—Ö –≤ –¥–∏–∫–æ–π –ø—Ä–∏—Ä–æ–¥–µ –∫–æ—Ä–º–∏—Ç—å –Ω–µ–ª—å–∑—è.</span>
                <div class="myth-btns">
                    <button class="btn-true" onclick="checkMyth(this, true)">–ü—Ä–∞–≤–¥–∞</button>
                    <button class="btn-false" onclick="checkMyth(this, false)">–ú–∏—Ñ</button>
                    <span class="myth-result"></span>
                </div>
            </div>
            <div class="myth-card">
                <span>3. –ì—Ä–æ–º–∫–∏–π —à—É–º –Ω–µ –º–µ—à–∞–µ—Ç –ø—Ç–∏—Ü–∞–º.</span>
                <div class="myth-btns">
                    <button class="btn-true" onclick="checkMyth(this, false)">–ü—Ä–∞–≤–¥–∞</button>
                    <button class="btn-false" onclick="checkMyth(this, true)">–ú–∏—Ñ</button>
                    <span class="myth-result"></span>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h2>üö¶ –ò–≥—Ä–∞ ¬´–°–≤–µ—Ç–æ—Ñ–æ—Ä¬ª</h2>
        <p>–ï—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ —Ö–æ—Ä–æ—à–µ–µ ‚Äî –∂–º–∏ –ó–µ–ª–µ–Ω—ã–π. –ï—Å–ª–∏ –≤—Ä–µ–¥–Ω–æ–µ ‚Äî –ö—Ä–∞—Å–Ω—ã–π.</p>
        <div class="light-game">
            <div class="light-task" id="lightTask">–ó–∞–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>
            <div class="light-controls">
                <div class="light-btn light-green" onclick="checkLight(true)"></div>
                <div class="light-btn light-red" onclick="checkLight(false)"></div>
            </div>
            <p id="lightMsg" style="font-weight:bold; height: 20px;"></p>
        </div>
    </section>

    <section>
        <h2>üîó –ò–≥—Ä–∞ ¬´–≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞¬ª</h2>
        <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Å–µ—Ä—É—é –∑–æ–Ω—É, —á—Ç–æ–±—ã —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∏—â–µ–≤—É—é —Ü–µ–ø—å (–∫—Ç–æ –∫–æ–≥–æ –µ—Å—Ç?):</p>
        
        <div class="chain-container" id="chainTarget" ondrop="drop(event)" ondragover="allowDrop(event)">
            <span style="color:#aaa; margin-left:20px;">–ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞...</span>
        </div>
        
        <div class="chain-pool">
            <div class="chain-item" draggable="true" ondragstart="drag(event)" id="item1">üå± –†–∞—Å—Ç–µ–Ω–∏–µ</div>
            <div class="chain-item" draggable="true" ondragstart="drag(event)" id="item2">üêõ –ì—É—Å–µ–Ω–∏—Ü–∞</div>
            <div class="chain-item" draggable="true" ondragstart="drag(event)" id="item3">üê¶ –ü—Ç–∏—Ü–∞</div>
            <div class="chain-item" draggable="true" ondragstart="drag(event)" id="item4">ü¶ä –õ–∏—Å–∞</div>
            <div class="chain-item" draggable="true" ondragstart="drag(event)" id="item5">ü¶† –ë–∞–∫—Ç–µ—Ä–∏–∏</div>
        </div>
        <button class="btn-action" onclick="resetChain()">‚ôªÔ∏è –°–±—Ä–æ—Å–∏—Ç—å —Ü–µ–ø–æ—á–∫—É</button>
    </section>

    <section id="worksheets-container">
        <h2>üìù –†–∞–±–æ—á–∏–µ –ª–∏—Å—Ç—ã (–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ)</h2>
        <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Å–∫–∞—á–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>

        <details class="worksheet" open>
            <summary class="worksheet-header">üîç –õ–ò–°–¢ ‚Ññ1 ‚Äî ¬´–≠–∫–æ-–¥–µ—Ç–µ–∫—Ç–∏–≤¬ª</summary>
            <div class="sheet-content">
                <p>–ü—Ä–µ–¥—Å—Ç–∞–≤—å: –ü–æ–ª—è–Ω–∞ —Å –º—É—Å–æ—Ä–æ–º –∏ –∫–æ—Å—Ç—Ä–∏—â–µ–º. –ù–∞–π–¥–∏ 5 –Ω–∞—Ä—É—à–µ–Ω–∏–π:</p>
                <textarea class="sheet-area" placeholder="1. ... 2. ..."></textarea>
                <p>–ü—Ä–µ–¥–ª–æ–∂–∏ —Ä–µ—à–µ–Ω–∏–µ:</p>
                <textarea class="sheet-area"></textarea>
            </div>
        </details>

        <details class="worksheet">
            <summary class="worksheet-header">üéí –õ–ò–°–¢ ‚Ññ2 ‚Äî ¬´–≠–∫–æ-—Ä—é–∫–∑–∞–∫¬ª</summary>
            <div class="sheet-content">
                <h3>–ß—Ç–æ –±–µ—Ä–µ–º? (–û—Ç–º–µ—Ç—å)</h3>
                <div style="display:grid; grid-template-columns: 1fr 1fr;">
                    <label><input type="checkbox"> –ú–Ω–æ–≥–æ—Ä–∞–∑. –∫—Ä—É–∂–∫–∞</label>
                    <label><input type="checkbox"> –ü–ª–∞—Å—Ç–∏–∫. —Ç–∞—Ä–µ–ª–∫–∏</label>
                    <label><input type="checkbox"> –ü–∞–∫–µ—Ç –¥–ª—è –º—É—Å–æ—Ä–∞</label>
                    <label><input type="checkbox"> –ì—Ä–æ–º–∫–∞—è –∫–æ–ª–æ–Ω–∫–∞</label>
                </div>
                <h3>–ó–∞–º–µ–Ω—ã:</h3>
                <input type="text" class="sheet-input" placeholder="–í–º–µ—Å—Ç–æ –ø–ª–∞—Å—Ç–∏–∫–∞..." style="width:100%"><br>
                <input type="text" class="sheet-input" placeholder="–í–º–µ—Å—Ç–æ –ø–∞–∫–µ—Ç–æ–≤..." style="width:100%">
            </div>
        </details>

        <details class="worksheet">
            <summary class="worksheet-header">üé≤ –õ–ò–°–¢ ‚Ññ4 ‚Äî ¬´–ú–æ—è –∏–≥—Ä–∞¬ª</summary>
            <div class="sheet-content">
                <p>–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã: <input type="text" class="sheet-input"></p>
                <p>–¢–∏–ø: <input type="text" class="sheet-input" placeholder="–ø–æ–¥–≤–∏–∂–Ω–∞—è/–Ω–∞—Å—Ç–æ–ª—å–Ω–∞—è"></p>
                <h3>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</h3>
                <textarea class="sheet-area" placeholder="–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?"></textarea>
                <h3>–¶–µ–ª—å –∏–≥—Ä—ã (—á–µ–º—É —É—á–∏—Ç):</h3>
                <textarea class="sheet-area"></textarea>
            </div>
        </details>

        <button class="btn-download" onclick="generateAndDownloadWord()">üíæ –°–∫–∞—á–∞—Ç—å –ª–∏—Å—Ç—ã (Word)</button>
    </section>

    <section>
        <h2 style="text-align: center;">üé® –†–µ—Ñ–ª–µ–∫—Å–∏—è: ¬´–≠–∫–æ-—Å–º–∞–π–ª–∏–∫¬ª</h2>
        <p style="text-align: center;">–ù–∞—Ä–∏—Å—É–π—Ç–µ —Å–º–∞–π–ª–∏–∫ –≤–∞—à–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è:</p>
        
        <div style="text-align: center;">
            <div class="palette">
                <div class="color-swatch active" style="background:black" onclick="setColor('black')"></div>
                <div class="color-swatch" style="background:#4caf50" onclick="setColor('#4caf50')"></div>
                <div class="color-swatch" style="background:#f44336" onclick="setColor('#f44336')"></div>
                <div class="color-swatch" style="background:#2196f3" onclick="setColor('#2196f3')"></div>
            </div>
            <canvas id="smileCanvas" width="300" height="200"></canvas>
            <br>
            <button class="btn-action" onclick="clearCanvas()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
        </div>
    </section>
</div>

<script>
    // --- –ò–ì–†–ê 1: –ú–∏—Ñ—ã ---
    function checkMyth(btn, isCorrect) {
        const parent = btn.parentElement;
        const resultSpan = parent.querySelector('.myth-result');
        
        // –ë–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏
        parent.querySelectorAll('button').forEach(b => b.disabled = true);
        
        resultSpan.style.display = "inline";
        if(isCorrect) {
            resultSpan.innerText = "–í–µ—Ä–Ω–æ! ‚úÖ";
            resultSpan.style.color = "green";
        } else {
            resultSpan.innerText = "–û—à–∏–±–∫–∞ ‚ùå";
            resultSpan.style.color = "red";
        }
    }

    // --- –ò–ì–†–ê 2: –°–≤–µ—Ç–æ—Ñ–æ—Ä ---
    const lightTasks = [
        {t: "–ö–æ—Ä–º–∏—Ç—å –±–µ–ª–æ–∫ —á–∏–ø—Å–∞–º–∏", ok: false},
        {t: "–ò–¥—Ç–∏ —Å—Ç—Ä–æ–≥–æ –ø–æ —Ç—Ä–æ–ø–µ", ok: true},
        {t: "–£–±—Ä–∞—Ç—å —á—É–∂–æ–π –º—É—Å–æ—Ä", ok: true},
        {t: "–í—Ä—É–±–∏—Ç—å –º—É–∑—ã–∫—É –≤ –ª–µ—Å—É", ok: false},
        {t: "–°—Ä—ã–≤–∞—Ç—å —Ä–µ–¥–∫–∏–µ —Ü–≤–µ—Ç—ã", ok: false}
    ];
    let currentTask = 0;

    function renderLight() {
        if(currentTask < lightTasks.length) {
            document.getElementById('lightTask').innerText = lightTasks[currentTask].t;
            document.getElementById('lightMsg').innerText = "";
        } else {
            document.getElementById('lightTask').innerText = "–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! üéâ";
            document.querySelector('.light-controls').style.display = "none";
        }
    }
    
    function checkLight(userChoice) {
        const correct = lightTasks[currentTask].ok; // true = Green
        const msg = document.getElementById('lightMsg');
        
        if(userChoice === correct) {
            msg.style.color = "green"; msg.innerText = "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
            setTimeout(() => { currentTask++; renderLight(); }, 1000);
        } else {
            msg.style.color = "red"; msg.innerText = "–ù–µ–≤–µ—Ä–Ω–æ!";
        }
    }
    renderLight();

    // --- –ò–ì–†–ê 3: –¶–µ–ø–æ—á–∫–∞ ---
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
    function allowDrop(ev) { ev.preventDefault(); }
    function drop(ev) {
        ev.preventDefault();
        const data = ev.dataTransfer.getData("text");
        const el = document.getElementById(data);
        const target = document.getElementById('chainTarget');
        
        // –£–¥–∞–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å
        if(target.querySelector('span')) target.querySelector('span').remove();
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–µ–ª–∫—É –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
        if(target.children.length > 0) {
            const arrow = document.createElement('span');
            arrow.className = 'chain-arrow'; arrow.innerText = '‚Üí';
            target.appendChild(arrow);
        }
        
        target.appendChild(el);
    }
    function resetChain() { location.reload(); } // –ü—Ä–æ—Å—Ç–æ–π —Å–±—Ä–æ—Å

    // --- WORD ---
    function generateAndDownloadWord() {
        const container = document.getElementById('worksheets-container');
        const clone = container.cloneNode(true);
        clone.querySelector('button').remove(); clone.querySelector('h2').remove(); clone.querySelector('p').remove();
        
        const inputs = clone.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            const span = document.createElement('span');
            span.style.color = 'blue'; span.style.fontWeight = 'bold';
            
            if (input.type === 'checkbox') {
                span.innerText = input.checked ? '‚òí ' : '‚òê ';
            } else {
                span.innerText = input.value || "______________________";
            }
            input.replaceWith(span);
        });

        const details = clone.querySelectorAll('details');
        details.forEach(det => {
            const title = det.querySelector('summary').innerText;
            const div = document.createElement('div');
            div.innerHTML = `<h3>${title}</h3>` + det.querySelector('.sheet-content').innerHTML;
            det.replaceWith(div);
        });

        const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>–î–ó –£—Ä–æ–∫ 10</title></head><body>";
        const footer = "</body></html>";
        const content = `<h1 style="text-align:center;color:#f57f17">–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è: –≠–∫–æ-–∏–≥—Ä—ã</h1>` + clone.innerHTML;
        
        const blob = new Blob(['\ufeff', header + content + footer], { type: 'application/msword' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a'); link.href = url; link.download = '–ú–æ—è_–ò–≥—Ä–∞_–£—Ä–æ–∫_10.doc';
        document.body.appendChild(link); link.click(); document.body.removeChild(link);
    }

    // --- –†–ò–°–û–í–ê–õ–ö–ê (Canvas) ---
    const canvas = document.getElementById('smileCanvas');
    const ctx = canvas.getContext('2d');
    let painting = false;
    let currentColor = 'black';

    function startPosition(e) { painting = true; draw(e); }
    function finishedPosition() { painting = false; ctx.beginPath(); }
    function draw(e) {
        if(!painting) return;
        ctx.lineWidth = 5;
        ctx.lineCap = 'round';
        ctx.strokeStyle = currentColor;

        const rect = canvas.getBoundingClientRect();
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }

    canvas.addEventListener('mousedown', startPosition);
    canvas.addEventListener('mouseup', finishedPosition);
    canvas.addEventListener('mousemove', draw);
    
    // Touch support for mobile
    canvas.addEventListener('touchstart', (e) => {
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent("mousedown", { clientX: touch.clientX, clientY: touch.clientY });
        canvas.dispatchEvent(mouseEvent);
    }, false);
    canvas.addEventListener('touchmove', (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent("mousemove", { clientX: touch.clientX, clientY: touch.clientY });
        canvas.dispatchEvent(mouseEvent);
    }, false);
    canvas.addEventListener('touchend', () => {
        const mouseEvent = new MouseEvent("mouseup", {});
        canvas.dispatchEvent(mouseEvent);
    }, false);

    function setColor(color) { 
        currentColor = color; 
        document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
        event.target.classList.add('active');
    }
    function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
</script>

</body>
</html>