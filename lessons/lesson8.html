<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—Ä–æ–∫ 8: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —ç–∫–æ–ø–æ—Ö–æ–¥–∞</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #d84315; /* –ö–∏—Ä–ø–∏—á–Ω—ã–π/–û—Ä–∞–Ω–∂–µ–≤—ã–π (–∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö) */
            --dark: #bf360c;
            --accent: #ffcc80;
            --bg: #fff3e0;
            --white: #ffffff;
            --green: #2e7d32;
            --text: #3e2723;
        }

        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            line-height: 1.6; 
            color: var(--text); 
            background-color: var(--bg); 
            margin: 0; 
            background-image: url('data:image/svg+xml;utf8,<svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M20 20 L10 40 L30 40 Z" fill="%23ffe0b2" opacity="0.5"/></svg>');
        }

        header { 
            background: linear-gradient(135deg, var(--dark), var(--primary)); 
            color: white; 
            padding: 25px 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-radius: 0 0 20px 20px;
        }

        .back-btn { 
            color: white; text-decoration: none; font-weight: bold; 
            border: 2px solid rgba(255,255,255,0.7); padding: 8px 20px; 
            border-radius: 25px; transition: 0.3s;
        }
        .back-btn:hover { background: white; color: var(--dark); }

        .content { max-width: 1000px; margin: 40px auto; padding: 0 20px; }

        section { 
            background: var(--white); padding: 30px; border-radius: 20px; 
            margin-bottom: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 1px solid #ffcc80;
        }

        h2 { color: var(--dark); border-bottom: 3px solid var(--accent); padding-bottom: 10px; display: inline-block; margin-top: 0; }
        h3 { color: var(--primary); margin-top: 20px; }

        /* –ò–ì–†–ê 1: –õ–∏—à–Ω–µ–µ */
        .odd-one-out {
            display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;
        }
        .odd-card {
            background: #fbe9e7; padding: 15px; border-radius: 10px; border: 2px solid #ffab91;
            cursor: pointer; transition: 0.3s; width: 120px; text-align: center;
        }
        .odd-card:hover { transform: scale(1.05); }
        .odd-card.wrong { background: #ffcdd2; border-color: red; } /* –î–ª—è –ø–ª–æ—Ö–∏—Ö –≤–µ—â–µ–π */
        .odd-card.correct { background: #c8e6c9; border-color: green; } /* –î–ª—è —Ö–æ—Ä–æ—à–∏—Ö */

        /* –í–ò–î–ï–û */
        .video-wrapper { 
            border-radius: 15px; overflow: hidden; position: relative; 
            padding-bottom: 56.25%; height: 0; margin: 20px 0; border: 4px solid var(--dark);
        }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* –ò–ì–†–ê 2: –†—é–∫–∑–∞–∫ */
        .backpack-container {
            display: flex; gap: 20px; flex-wrap: wrap;
        }
        .backpack-list {
            flex: 2; display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px;
        }
        .item-btn {
            background: #fff; border: 2px solid #ddd; padding: 10px; border-radius: 8px;
            cursor: pointer; text-align: left; transition: 0.2s; position: relative;
        }
        .item-btn.selected { border-color: var(--primary); background: #fff3e0; }
        .item-btn.selected::after { content: '‚úîÔ∏è'; position: absolute; top: 5px; right: 5px; }
        
        .backpack-status {
            flex: 1; background: #e0f7fa; padding: 20px; border-radius: 15px; border: 2px dashed #00bcd4;
        }

        /* –ö–ê–†–¢–û–ß–ö–ò –°–ò–¢–£–ê–¶–ò–ô (Flip) */
        .situations-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .flip-card { background-color: transparent; height: 200px; perspective: 1000px; cursor: pointer; }
        .flip-card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 15px; }
        .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 15px; display: flex; align-items: center; justify-content: center; flex-direction: column; padding: 15px; box-sizing: border-box; }
        .flip-card-front { background: white; border: 2px solid var(--primary); color: var(--dark); }
        .flip-card-back { background: var(--primary); color: white; transform: rotateY(180deg); font-size: 0.9rem; }

        /* –¢–ï–°–¢ */
        .quiz-item { margin-bottom: 15px; padding: 15px; background: #fff8e1; border-radius: 10px; border-left: 4px solid #ffb300; }
        .btn-action { background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 25px; cursor: pointer; width: 100%; font-size: 1rem; margin-top: 10px; transition: 0.3s; }
        .btn-action:hover { background: var(--dark); }

        /* –†–ï–§–õ–ï–ö–°–ò–Ø */
        .tent-container { text-align: center; }
        .tent-options { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 20px; }
        .tent-option { 
            background: white; border: 2px solid var(--green); padding: 10px 20px; 
            border-radius: 20px 20px 0 0; /* –§–æ—Ä–º–∞ –ø–∞–ª–∞—Ç–∫–∏ */
            cursor: pointer; transition: 0.3s; clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            width: 120px; height: 100px; display: flex; align-items: flex-end; justify-content: center;
            font-weight: bold; padding-bottom: 10px; color: var(--green);
        }
        .tent-option:hover { background: var(--green); color: white; transform: translateY(-5px); }

        .btn-download { background: var(--text); color: white; border: none; padding: 15px 30px; border-radius: 30px; cursor: pointer; width: 100%; font-size: 1.1rem; font-weight: bold; margin-top: 20px; }
        .btn-clear { background: #9e9e9e; color: white; border: none; padding: 8px 20px; border-radius: 20px; cursor: pointer; font-size: 0.9rem; margin-top: 20px; }
    </style>
</head>
<body>

<header>
    <a href="../index.html" class="back-btn">‚Üê –ú–µ–Ω—é</a>
    <div style="text-align: right">
        <h1 style="margin:0; font-size: 1.5rem;">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —ç–∫–æ–ø–æ—Ö–æ–¥–∞</h1>
        <small>–£—Ä–æ–∫ ‚Ññ8</small>
    </div>
</header>

<div class="content">
    
    <section>
        <h2>üéí –ò–¥–µ–º –≤ –ø–æ—Ö–æ–¥!</h2>
        <p><i>–í–æ–ø—Ä–æ—Å:</i> –ß—Ç–æ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π –≤ –ø–æ—Ö–æ–¥, —á—Ç–æ–±—ã –ù–ï –Ω–∞–≤—Ä–µ–¥–∏—Ç—å –ø—Ä–∏—Ä–æ–¥–µ, –Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∂–∏–≤—ã–º –∏ –¥–æ–≤–æ–ª—å–Ω—ã–º?</p>
        <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; border-left: 5px solid var(--green);">
            <strong>–¶–µ–ª—å —É—Ä–æ–∫–∞:</strong> –ù–∞—É—á–∏—Ç—å—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç.
        </div>
    </section>

    <section>
        <h2>üö´ –ò–≥—Ä–∞ ¬´–ù–∞–π–¥–∏ –ª–∏—à–Ω–µ–µ¬ª</h2>
        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º <b>–ù–ï –ú–ï–°–¢–û</b> –≤ —ç–∫–æ–ø–æ—Ö–æ–¥–µ (–æ–Ω–∏ –≤—Ä–µ–¥—è—Ç –ø—Ä–∏—Ä–æ–¥–µ –∏–ª–∏ –º–µ—à–∞—é—Ç):</p>
        <div class="odd-one-out">
            <div class="odd-card" onclick="checkItem(this, true)">ü•§ –ü–ª–∞—Å—Ç–∏–∫. —Å—Ç–∞–∫–∞–Ω</div>
            <div class="odd-card" onclick="checkItem(this, false)">‚òï –¢–µ—Ä–º–æ-–∫—Ä—É–∂–∫–∞</div>
            <div class="odd-card" onclick="checkItem(this, true)">üîä –ì—Ä–æ–º–∫–∞—è –∫–æ–ª–æ–Ω–∫–∞</div>
            <div class="odd-card" onclick="checkItem(this, false)">üî≠ –ë–∏–Ω–æ–∫–ª—å</div>
            <div class="odd-card" onclick="checkItem(this, false)">üóëÔ∏è –ü–∞–∫–µ—Ç –¥–ª—è –º—É—Å–æ—Ä–∞</div>
            <div class="odd-card" onclick="checkItem(this, true)">üçΩÔ∏è –û–¥–Ω–æ—Ä–∞–∑. —Ç–∞—Ä–µ–ª–∫–∞</div>
        </div>
    </section>

    <section>
        <h2>üìö –ö–∞–∫ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è?</h2>
        <ul>
            <li><b>–ú–∞—Ä—à—Ä—É—Ç:</b> –ò–∑—É—á–∏ –∫–∞—Ä—Ç—É, –∑–Ω–∞–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–æ–¥—ã.</li>
            <li><b>–°–Ω–∞—Ä—è–∂–µ–Ω–∏–µ:</b> –ë–µ—Ä–∏ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–µ, –ª–µ–≥–∫–æ–µ –∏ –ø—Ä–æ—á–Ω–æ–µ.</li>
            <li><b>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</b> –ê–ø—Ç–µ—á–∫–∞, —Å–≤—è–∑—å, –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏ —Ä–æ–¥–Ω—ã—Ö.</li>
            <li><b>–≠–∫–æ–ª–æ–≥–∏—è:</b> ¬´–ù–µ –æ—Å—Ç–∞–≤–ª—è–π —Å–ª–µ–¥–æ–≤¬ª. –í–µ—Å—å –º—É—Å–æ—Ä ‚Äî —Å —Å–æ–±–æ–π.</li>
        </ul>
        <div class="video-wrapper">
            <iframe src="https://www.youtube.com/embed/P3MMDUMN_HM" title="–≠–∫–æ–ø–æ—Ö–æ–¥" frameborder="0" allowfullscreen></iframe>
        </div>
    </section>

    <section>
        <h2>üéí –°–æ–±–µ—Ä–∏ –≠–∫–æ-—Ä—é–∫–∑–∞–∫</h2>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ 10 –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏ —ç–∫–æ–ª–æ–≥–∏—á–Ω—ã—Ö –≤–µ—â–µ–π –∏–∑ —Å–ø–∏—Å–∫–∞:</p>
        <div class="backpack-container">
            <div class="backpack-list" id="backpack-items">
                </div>
            <div class="backpack-status">
                <h4>–í–∞—à —Ä—é–∫–∑–∞–∫:</h4>
                <p>–í—ã–±—Ä–∞–Ω–æ: <b id="count">0</b>/10</p>
                <p id="backpack-msg"></p>
                <button class="btn-action" onclick="checkBackpack()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            </div>
        </div>
    </section>

    <section>
        <h2>üÜò –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏...?</h2>
        <p>–ù–∞–∂–º–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:</p>
        <div class="situations-grid">
            <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><h3>üî• –ù–∞—à–ª–∏ –∫–æ—Å—Ç—Ä–∏—â–µ</h3></div><div class="flip-card-back">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–æ –ø–æ—Ç—É—à–µ–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ä–æ–µ –º–µ—Å—Ç–æ, –Ω–µ –¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤–æ–µ.</div></div></div>
            <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><h3>üêª –î–∏–∫–∏–π –∑–≤–µ—Ä—å</h3></div><div class="flip-card-back">–ù–µ –ø–æ–¥—Ö–æ–¥–∏! –ù–µ –∫–æ—Ä–º–∏! –ú–µ–¥–ª–µ–Ω–Ω–æ –æ—Ç—Å—Ç—É–ø–∞–π –Ω–∞–∑–∞–¥, –Ω–µ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—è—Å—å —Å–ø–∏–Ω–æ–π.</div></div></div>
            <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><h3>üåßÔ∏è –ü–æ—à–µ–ª –¥–æ–∂–¥—å</h3></div><div class="flip-card-back">–ù–∞–¥–µ–Ω—å –¥–æ–∂–¥–µ–≤–∏–∫. –£–∫—Ä–æ–π—Å—è, –Ω–æ –Ω–µ –ø–æ–¥ –æ–¥–∏–Ω–æ–∫–∏–º –¥–µ—Ä–µ–≤–æ–º (–º–æ–ª–Ω–∏—è!).</div></div></div>
            <div class="flip-card"><div class="flip-card-inner"><div class="flip-card-front"><h3>üöØ –£–≤–∏–¥–µ–ª–∏ –º—É—Å–æ—Ä</h3></div><div class="flip-card-back">–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å ‚Äî –∑–∞–±–µ—Ä–∏ —Å —Å–æ–±–æ–π. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–æ–±—â–∏ –ª–µ—Å–Ω–∏—á–µ–º—É.</div></div></div>
        </div>
    </section>

    <section>
        <h2>üìù –¢–µ—Å—Ç: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å ‚Ññ1</h2>
        <form id="quizForm">
            <div class="quiz-item"><p>1. –¶–µ–ª—å —ç–∫–æ–ø–æ—Ö–æ–¥–∞:</p><input type="radio" name="q1" value="b"> –û—Ç–¥—ã—Ö –±–µ–∑ –≤—Ä–µ–¥–∞<input type="radio" name="q1" value="a"> –†–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ</div>
            <div class="quiz-item"><p>2. –ß—Ç–æ –ù–ï –±—Ä–∞—Ç—å:</p><input type="radio" name="q2" value="c"> –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø–ª–∞—Å—Ç–∏–∫<input type="radio" name="q2" value="b"> –ê–ø—Ç–µ—á–∫—É</div>
            <div class="quiz-item"><p>3. –ü—Ä–∏–Ω—Ü–∏–ø ¬´–ù–µ –æ—Å—Ç–∞–≤–ª—è–π —Å–ª–µ–¥–æ–≤¬ª:</p><input type="radio" name="q3" value="b"> –£–±–∏—Ä–∞—Ç—å –≤—Å—ë –∑–∞ —Å–æ–±–æ–π<input type="radio" name="q3" value="a"> –û—Å—Ç–∞–≤–ª—è—Ç—å –Ω–∞–¥–ø–∏—Å–∏</div>
            <div class="quiz-item"><p>4. –ú–æ–∂–Ω–æ –ª–∏ –∫–æ—Ä–º–∏—Ç—å –∑–≤–µ—Ä–µ–π?</p><input type="radio" name="q4" value="b"> –ù–µ—Ç<input type="radio" name="q4" value="a"> –î–∞</div>
            <div class="quiz-item"><p>5. –ù–∞—á–∞–ª—Å—è –¥–æ–∂–¥—å:</p><input type="radio" name="q5" value="b"> –ù–∞–¥–µ—Ç—å –∑–∞—â–∏—Ç—É<input type="radio" name="q5" value="c"> –†–∞–∑–∂–µ—á—å –∫–æ—Å—Ç–µ—Ä</div>
            <div class="quiz-item"><p>6. –ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è?</p><input type="radio" name="q6" value="b"> –ö–∞—Ä—Ç–∞ –∏ –∫–æ–º–ø–∞—Å<input type="radio" name="q6" value="c"> –ò–Ω—Ç—É–∏—Ü–∏—è</div>
            <div class="quiz-item"><p>7. –ö—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å?</p><input type="radio" name="q7" value="b"> –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å<input type="radio" name="q7" value="c"> –ù–∏–∫—Ç–æ</div>
            
            <button type="button" class="btn-action" onclick="checkQuiz()">–°–¥–∞—Ç—å —Ç–µ—Å—Ç</button>
            <p id="quiz-result" style="text-align:center; font-weight:bold; margin-top:15px;"></p>
        </form>
    </section>

    <section>
        <h2>üè† –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h2>
        <p>1. –°–æ—Å—Ç–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç —ç–∫–æ–ø–æ—Ö–æ–¥–∞ (2-4 –∫–º) –ò–õ–ò</p>
        <p>2. –ù–∞—Ä–∏—Å—É–π—Ç–µ —Å—Ö–µ–º—É —ç–∫–æ—Ä—é–∫–∑–∞–∫–∞.</p>
        <button class="btn-download" onclick="downloadWordDoc()">üìÑ –°–∫–∞—á–∞—Ç—å –∑–∞–¥–∞–Ω–∏—è –∏ —Ç–∞–±–ª–∏—Ü—ã (Word)</button>
    </section>

    <section>
        <h2 style="text-align: center;">‚õ∫ –†–µ—Ñ–ª–µ–∫—Å–∏—è ¬´–ü–∞–ª–∞—Ç–∫–∞¬ª</h2>
        <p style="text-align: center;">–ó–∞–∫–æ–Ω—á–∏ —Ñ—Ä–∞–∑—É: <b>¬´–ß—Ç–æ–±—ã –ø–æ—Ö–æ–¥ –ø—Ä–æ—à–µ–ª —Ö–æ—Ä–æ—à–æ, –≤–∞–∂–Ω–æ...¬ª</b></p>
        
        <div class="tent-container">
            <div class="tent-options">
                <div class="tent-option" onclick="vote(0)">–°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ üìú</div>
                <div class="tent-option" onclick="vote(1)">–ë—ã—Ç—å –∫–æ–º–∞–Ω–¥–æ–π ü§ù</div>
                <div class="tent-option" onclick="vote(2)">–•–æ—Ä–æ—à–æ —Å–æ–±—Ä–∞—Ç—å—Å—è üéí</div>
                <div class="tent-option" onclick="vote(3)">–ë–µ—Ä–µ—á—å –ø—Ä–∏—Ä–æ–¥—É üå±</div>
            </div>
        </div>

        <p id="vote-msg" style="text-align: center; color: var(--primary); font-weight: bold; margin-top: 15px; height: 20px;"></p>

        <div style="max-width: 500px; margin: 20px auto;">
            <canvas id="reflectionChart"></canvas>
        </div>

        <div style="text-align: center;">
            <button class="btn-clear" onclick="clearVotes()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</button>
        </div>
    </section>
</div>

<script>
    // --- –ò–ì–†–ê 1: –õ–∏—à–Ω–µ–µ ---
    function checkItem(card, isBad) {
        if(isBad) {
            card.style.background = "#ffcdd2"; // Red
            card.style.borderColor = "red";
            card.innerText += " ‚ùå";
        } else {
            card.style.background = "#c8e6c9"; // Green
            card.style.borderColor = "green";
            card.innerText += " ‚úÖ";
        }
        card.onclick = null; // Disable click
    }

    // --- –ò–ì–†–ê 2: –†—é–∫–∑–∞–∫ ---
    const items = [
        {n: "üçΩÔ∏è –ü–ª–∞—Å—Ç–∏–∫. —Ç–∞—Ä–µ–ª–∫–∏", ok: false}, {n: "‚òï –ú–Ω–æ–≥–æ—Ä–∞–∑. –∫—Ä—É–∂–∫–∞", ok: true},
        {n: "üç≤ –ï–¥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ", ok: true}, {n: "ü•§ –û–¥–Ω–æ—Ä–∞–∑. —Å—Ç–∞–∫–∞–Ω—ã", ok: false},
        {n: "üíä –ê–ø—Ç–µ—á–∫–∞", ok: true}, {n: "üóëÔ∏è –ü–∞–∫–µ—Ç –¥–ª—è –º—É—Å–æ—Ä–∞", ok: true},
        {n: "üî™ –ù–æ–∂", ok: true}, {n: "üîä –ö–æ–ª–æ–Ω–∫–∞", ok: false},
        {n: "üó∫Ô∏è –ö–∞—Ä—Ç–∞", ok: true}, {n: "üß≠ –ö–æ–º–ø–∞—Å", ok: true},
        {n: "üß• –î–æ–∂–¥–µ–≤–∏–∫", ok: true}, {n: "üö¨ –°–∏–≥–∞—Ä–µ—Ç—ã", ok: false},
        {n: "üî¶ –§–æ–Ω–∞—Ä–∏–∫", ok: true}, {n: "üì∑ –§–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç", ok: true},
        {n: "üî• –°–ø–∏—á–∫–∏ (–≤ –∫–æ–Ω—Ç.)", ok: true}
    ];

    const listDiv = document.getElementById('backpack-items');
    let selectedCount = 0;

    items.forEach(item => {
        const btn = document.createElement('div');
        btn.className = 'item-btn';
        btn.innerText = item.n;
        btn.onclick = () => {
            btn.classList.toggle('selected');
            // –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø–æ–¥—Å—á–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö
            const allSelected = document.querySelectorAll('.item-btn.selected');
            selectedCount = allSelected.length;
            document.getElementById('count').innerText = selectedCount;
        };
        // –•—Ä–∞–Ω–∏–º –¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏
        btn.dataset.ok = item.ok;
        listDiv.appendChild(btn);
    });

    function checkBackpack() {
        const allSelected = document.querySelectorAll('.item-btn.selected');
        let mistakes = 0;
        allSelected.forEach(btn => {
            if(btn.dataset.ok === "false") {
                btn.style.background = "#ffcdd2"; // Red background for bad items
                mistakes++;
            } else {
                btn.style.borderColor = "green";
            }
        });

        const msg = document.getElementById('backpack-msg');
        if(mistakes > 0) {
            msg.style.color = "red";
            msg.innerText = `–í—ã –≤–∑—è–ª–∏ ${mistakes} –≤—Ä–µ–¥–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞! –£–±–µ—Ä–∏—Ç–µ –∏—Ö.`;
        } else if (selectedCount < 8) {
            msg.style.color = "orange";
            msg.innerText = "–í—ã –≤–∑—è–ª–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–æ –≤–µ—â–µ–π!";
        } else {
            msg.style.color = "green";
            msg.innerText = "–û—Ç–ª–∏—á–Ω—ã–π —Ä—é–∫–∑–∞–∫! –í—ã –≥–æ—Ç–æ–≤—ã.";
        }
    }

    // --- –¢–ï–°–¢ ---
    function checkQuiz() {
        const form = document.getElementById('quizForm');
        let score = 0;
        const answers = ['b', 'c', 'b', 'b', 'b', 'b', 'b']; // –ö–ª—é—á–∏ –∏–∑ –ø–ª–∞–Ω–∞
        for(let i=1; i<=7; i++) {
            if(form['q'+i].value === answers[i-1]) score++;
        }
        const res = document.getElementById('quiz-result');
        res.innerText = `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ 7. ` + (score >= 6 ? "–í—ã –ø—Ä–æ—Ñ–∏!" : "–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ–æ—Ä–∏—é.");
        res.style.color = score >= 6 ? "green" : "red";
    }

    // --- WORD DOWNLOAD ---
    function downloadWordDoc() {
        const header = "<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>–î–ó –£—Ä–æ–∫ 8</title></head><body>";
        const footer = "</body></html>";
        const content = `
            <h1 style="color:#d84315;text-align:center">–ó–∞–¥–∞–Ω–∏—è: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —ç–∫–æ–ø–æ—Ö–æ–¥–∞</h1>
            <p>–§–ò–û: _____________________________</p>
            
            <h3>–ó–∞–¥–∞–Ω–∏–µ 1: –ú–∞—Ä—à—Ä—É—Ç (2-4 –∫–º)</h3>
            <p>–ù–∞–ø–∏—à–∏—Ç–µ 5-7 —Ç–æ—á–µ–∫ –≤–∞—à–µ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞:</p>
            <p>1. ________________________________________</p>
            <p>2. ________________________________________</p>
            <p>3. ________________________________________</p>
            <p>4. ________________________________________</p>
            <p>5. ________________________________________</p>
            
            <h3>–ó–∞–¥–∞–Ω–∏–µ 2: –≠–∫–æ—Ä—é–∫–∑–∞–∫</h3>
            <p>–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ 10 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–æ–∑—å–º–µ—Ç–µ:</p>
            <table border="1" style="width:100%;border-collapse:collapse">
                <tr><td height="30">1.</td><td>6.</td></tr>
                <tr><td height="30">2.</td><td>7.</td></tr>
                <tr><td height="30">3.</td><td>8.</td></tr>
                <tr><td height="30">4.</td><td>9.</td></tr>
                <tr><td height="30">5.</td><td>10.</td></tr>
            </table>
            
            <h3>–ó–∞–¥–∞–Ω–∏–µ 3: –°–∏—Ç—É–∞—Ü–∏–∏</h3>
            <p>–ß—Ç–æ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ, –µ—Å–ª–∏ —É–≤–∏–¥–∏—Ç–µ —á—É–∂–æ–π –º—É—Å–æ—Ä?</p>
            <p>___________________________________________________</p>
        `;
        
        const blob = new Blob(['\ufeff', header + content + footer], { type: 'application/msword' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a'); link.href = url; link.download = '–î–ó_–£—Ä–æ–∫_8.doc';
        document.body.appendChild(link); link.click(); document.body.removeChild(link);
    }

    // --- –†–ï–§–õ–ï–ö–°–ò–Ø (–ì–û–õ–û–°–û–í–ê–ù–ò–ï) ---
    const labels = ["–°–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞", "–ë—ã—Ç—å –∫–æ–º–∞–Ω–¥–æ–π", "–•–æ—Ä–æ—à–æ —Å–æ–±—Ä–∞—Ç—å—Å—è", "–ë–µ—Ä–µ—á—å –ø—Ä–∏—Ä–æ–¥—É"];
    let votes = JSON.parse(localStorage.getItem('lesson8_votes')) || [0, 0, 0, 0];
    let myChart;

    function initChart() {
        const ctx = document.getElementById('reflectionChart').getContext('2d');
        myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: '–í–∞–∂–Ω–æ...',
                    data: votes,
                    backgroundColor: '#ffcc80',
                    borderColor: '#d84315',
                    borderWidth: 2
                }]
            },
            options: { scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } }, plugins: { legend: { display: false } } }
        });
    }

    function vote(index) {
        votes[index]++;
        localStorage.setItem('lesson8_votes', JSON.stringify(votes));
        myChart.data.datasets[0].data = votes;
        myChart.update();
        const msg = document.getElementById('vote-msg');
        msg.innerText = "–ú–Ω–µ–Ω–∏–µ —É—á—Ç–µ–Ω–æ! ‚õ∫";
        setTimeout(() => { msg.innerText = ""; }, 1500);
    }

    function clearVotes() {
        if(confirm("–û—á–∏—Å—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ?")) {
            votes = [0, 0, 0, 0];
            localStorage.setItem('lesson8_votes', JSON.stringify(votes));
            myChart.data.datasets[0].data = votes;
            myChart.update();
        }
    }

    window.onload = initChart;
</script>

</body>
</html>